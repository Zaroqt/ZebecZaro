<!DOCTYPE html>
<html lang="my"> <!-- Burmese Language -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZZ Feed (Community Posts)</title>
    
    <!-- Font Awesome (Icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="tma-style.css">

    <!-- üõë FIREBASE SDKS (Database ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ·Äô·Äñ·Äº·ÄÖ·Ä∫·Äô·Äî·Ä±·Äú·Ä≠·ÄØ·Ä°·Äï·Ä∫·Äû·Ää·Ä∫) üõë -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <!-- 3. ·Äû·ÄÑ·Ä∑·Ä∫·Äõ·Ä≤·Ä∑ Firebase Config ·ÄÄ·Ä≠·ÄØ ·Ä°·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·Ä¨ ·Äë·Ää·Ä∑·Ä∫·Äõ·Äï·Ä´·Äô·Äö·Ä∫·Åã -->
    <script>
        // *** REPLACE THE CONFIG BELOW WITH YOUR ACTUAL FIREBASE CONFIG ***
        const firebaseConfig = {
            apiKey: "AIzaSyDpuDVZXdT6CZ6MlgRAd8bbVYtuIVevzlI", // üö® ·Äû·ÄÑ·Ä∑·Ä∫ Key ·Äñ·Äº·ÄÑ·Ä∑·Ä∫ ·Ä°·ÄÖ·Ä¨·Ä∏·Äë·Ä≠·ÄØ·Ä∏·Äï·Ä´
            authDomain: "zaroqt101.firebaseapp.com",
            databaseURL: "https://zaroqt101-default-rtdb.firebaseio.com", // üö® Realtime DB URL (Firestore ·Äû·ÄØ·Ä∂·Ä∏·Äû·Ä±·Ä¨·Ä∫·Äú·Ää·Ä∫·Ä∏ ·Äë·Ää·Ä∑·Ä∫·Äë·Ä¨·Ä∏·Äï·Ä´)
            projectId: "zaroqt101", // üö® ·Äû·ÄÑ·Ä∑·Ä∫ Project ID
            storageBucket: "zaroqt101.firebasestorage.app",
            messagingSenderId: "141083314351",
            appId: "1:141083314351:web:e7f7ce068c0c2c34a7ec5a",
            measurementId: "G-T247G5WRPJ" // Optional
        };

        // Initialize Firebase
        if (typeof firebase !== 'undefined' && firebaseConfig.apiKey !== "YOUR_API_KEY") {
            try {
                const firebaseApp = firebase.initializeApp(firebaseConfig);
                window.db = firebaseApp.firestore();
                console.log("Firebase and Firestore Initialized.");
            } catch (e) {
                console.error("Firebase Initialization Error:", e);
                // Display error to user if initialization fails
                document.addEventListener('DOMContentLoaded', () => {
                     const loadingEl = document.getElementById('initial-loading-text') || document.body;
                     loadingEl.innerHTML = `<p style="color:red; text-align:center; padding: 20px;">‚ùå Firebase Init Error: ${e.message}. Check Config in index.html.</p>`;
                });
            }
        } else {
            console.error("Firebase SDK not loaded or Config is missing/incorrect.");
             document.addEventListener('DOMContentLoaded', () => {
                 const loadingEl = document.getElementById('initial-loading-text') || document.body;
                 loadingEl.innerHTML = `<p style="color:red; text-align:center; padding: 20px;">‚ùå Firebase SDK load failed or Config missing.</p>`;
            });
        }
    </script>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

    <!-- üöÄ MAIN APP CONTAINER -->
    <div class="app-container">
        
        <!-- FIXED HEADER AREA -->
        <div class="fixed-header-area">
            <header>
                <div class="music-info-area">
                    <span id="current-music-status">Music Paused</span>
                    <i id="volume-toggle" class="fas fa-volume-off" title="Toggle Music"></i>
                </div>
                <button id="music-button" class="icon-btn" aria-label="Music Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </header>
            
            <!-- POST FILTER TABS -->
            <div class="filter-tabs" role="tablist">
                <button id="new-posts-tab" class="filter-tab active" data-filter="new-posts" role="tab" aria-selected="true">
                    üî• New Posts
                </button>
                <button class="filter-tab" data-filter="old-posts" role="tab" aria-selected="false">
                    ‚è≥ Oldest
                </button>
            </div>
        </div>

        <!-- CONTENT AREA -->
        <div class="content">
            
            <!-- HOME SCREEN (Post Feed) -->
            <div id="home-screen" class="screen active">
                <div id="posts-container" class="posts-list">
                    <!-- Posts will be injected here by JS -->
                    <p id="initial-loading-text" class="initial-loading-text">Loading posts...</p>
                </div>
            </div>

            <!-- PROFILE SCREEN -->
            <div id="profile-screen" class="screen">
                <div class="profile-card">
                    <div id="profile-avatar-placeholder" class="avatar-placeholder">U</div>
                    <h2 id="profile-display-name">Loading...</h2>
                    <p id="profile-display-username" class="hint-text">Username N/A</p>
                    <span id="admin-status" class="admin-badge">Regular User</span>

                    <div class="info-row">
                        <span>Telegram Chat ID:</span>
                        <div class="copy-area">
                            <span id="telegram-chat-id">0</span>
                            <button id="chat-id-copy-btn" class="icon-btn" aria-label="Copy User ID">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <button id="tma-close-btn" class="close-app-btn">
                        <i class="fas fa-times-circle"></i> Close Mini App
                    </button>
                </div>
            </div>
        </div>

        <!-- BOTTOM NAVIGATION -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-screen="home-screen" aria-label="Home Feed">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </button>
            <button class="nav-item" data-screen="profile-screen" aria-label="Profile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </button>
        </nav>
        
        <!-- FAB (ADMIN POST BUTTON) -->
        <button id="post-add-button" class="fab" aria-label="Add New Post" style="display:none;">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- üö® MODALS (Hidden by default using CSS) üö® -->

    <!-- Post Modal (Admin Only) -->
    <div id="post-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Create New Post</h3>
            <textarea id="post-input" placeholder="Type your announcement (5-500 chars)" maxlength="500"></textarea>
            <div class="modal-actions">
                <button id="cancel-post-btn" class="modal-cancel-btn">Cancel</button>
                <button id="submit-post-btn" class="modal-submit-btn">Post Now</button>
            </div>
        </div>
    </div>

    <!-- Music Modal -->
    <div id="music-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Music Settings</h3>
            <p class="hint-text">Choose your background audio source.</p>
            <div class="music-option-list">
                <button class="music-option" data-music-type="default">
                    <i class="fas fa-headphones"></i> Use Default Lofi
                </button>
                <button class="music-option" data-music-type="url">
                    <i class="fas fa-link"></i> Use Custom URL
                </button>
                <label for="music-upload-input" class="music-option">
                    <i class="fas fa-upload"></i> Upload Local File (.mp3)
                </label>
                <input type="file" id="music-upload-input" accept="audio/mp3,audio/*" style="display: none;">
            </div>
            <div class="modal-actions">
                <button id="cancel-music-modal-btn" class="modal-cancel-btn full-width">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Music URL Input Modal -->
    <div id="url-input-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Custom Music URL</h3>
            <input type="url" id="music-url-input" placeholder="Enter HTTP/HTTPS audio link">
            <div class="modal-actions">
                <button id="close-url-modal-btn" class="modal-cancel-btn">Back</button>
                <button id="play-url-btn" class="modal-submit-btn">Set & Play</button>
            </div>
        </div>
    </div>

    <!-- HTML5 Audio Player (Hidden) -->
    <audio id="audio-player" style="display:none;"></audio>

    <!-- TOAST NOTIFICATION -->
    <div id="custom-toast" class="custom-toast"></div>

    <!-- Custom JavaScript -->
    <script src="tma-script.js"></script>
</body>
</html>


